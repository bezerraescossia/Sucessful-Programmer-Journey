FROM node

# SET DEFAULT WORKING DIRECTORY
WORKDIR /app

# DOCKERFILE ARE LAYERED BASED. HENCE, IT MAKES SENSE
# TO RUN NPM INSTALL ONLY IF PACKAGE.JSON CHANGES
# AND THAT'S WHY WE COPY ONLY PACKAGE.JSON FIRST AND 
# RUN NPM INSTALL BEFORE COPYING ALL THE OTHER FILES
COPY package.json /app

RUN npm install

# HOST FILESYSTEM - CONTAINER FILESYSTEM
COPY . /app

# THIS COMMAND DOES NOTHING, IT SERVES AS DOCUMENTATION
EXPOSE 80

# NOTICE THAT ALL THE CCOMMANDS UNTIL HERE ARE TO BUILD THE IMAGE
# THEREFORE, IT WOULDN'T MAKE SENSE 'RUN NODE SERVER.JS'
# SINCE WE DON'T WANT TO INITIATE THE SERVER IN THE IMAGE
# BUT IN THE CONTAINER. IS THIS CASE WE USE CMD INSTEAD OF RUN
# WHICH EXECUTES ON THE CONTAINER
CMD ["node", "server.js"]

